#!/usr/bin/env ansible-playbook

---
- hosts: all
  become: yes
  gather_facts: true
  vars_files:
    - defaults/main.yml

  tasks:
    - name: "Delegate installation process"
      import_tasks: "tasks/use-{{ ansible_pkg_mgr }}.yml"

    - name: "VMware automation specific configurations"
      import_tasks: "tasks/vmware.yml"
      when: lookup('env','PLATFORM') == "vmware"

    - name: "Configure environment"
      import_tasks: "tasks/main.yml"